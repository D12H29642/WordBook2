<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì˜ë‚¨ê³  ê¸°ë§ ë‹¨ì–´ì¥ (ìµœì‹  í†µí•©)</title>
  <style>
    body { font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif; padding: 12px; background-color: #f9f9f9; }
    h2 { text-align: center; margin: 15px 0 20px; color: #333; }
    
    #controls { text-align: center; margin-bottom: 15px; }
    #btn-reverse {
      background-color: #007bff; color: white; border: none; padding: 10px 20px;
      border-radius: 6px; font-size: 1rem; cursor: pointer; transition: background 0.2s;
    }
    #btn-reverse:hover { background-color: #0056b3; }

    #counters { font-weight: bold; margin-bottom: 15px; text-align:center; font-size: 1.1em; }
    
    .table-wrapper { overflow-x: auto; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-radius: 8px; background: white; }
    table { width: 100%; border-collapse: collapse; font-size: 0.95em; }
    
    th, td { border-bottom: 1px solid #eee; padding: 12px 10px; text-align: left; vertical-align: middle; }
    th { background: #f1f3f5; color: #495057; font-weight: bold; border-top: 2px solid #dee2e6; }
    tr:last-child td { border-bottom: none; }
    
    /* ê°€ë¦¬ê¸° íš¨ê³¼ */
    .conceal { 
      color: transparent; 
      text-shadow: 0 0 8px rgba(0,0,0,0.5); 
      background-color: #e9ecef; 
      border-radius: 4px;
      cursor: pointer; 
      user-select: none;
    }
    
    /* ìƒíƒœ í‘œì‹œ */
    .unknown td { background-color: #fff5f5; }
    .unknown .col-eng, .unknown .col-mean { color: #e03131 !important; font-weight: bold; }
    .known td { background-color: #f8f9fa; color: #adb5bd; }
    
    /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    button { cursor: pointer; border: 1px solid #ced4da; background: white; border-radius: 4px; }
    .speak { 
      font-size: 1.2em; border: none; background: none; 
      cursor: pointer; padding: 0 0 0 5px; vertical-align: middle;
    }
    .col-act { white-space: nowrap; width: 120px; text-align: center; }
    .btn-known { margin-right: 5px; color: #2b8a3e; border-color: #2b8a3e; padding: 4px 8px; }
    .btn-known:hover { background: #2b8a3e; color: white; }
    .btn-unknown { color: #c92a2a; border-color: #c92a2a; padding: 4px 8px; }
    .btn-unknown:hover { background: #c92a2a; color: white; }

  </style>
</head>
<body>
  <h2>ì˜ë‚¨ê³  ê¸°ë§ ìµœì¢… ë‹¨ì–´ì¥</h2>

  <div id="controls">
    <button id="btn-reverse" type="button">ğŸ”„ ë‹¨ì–´/ëœ» ë’¤ì§‘ê¸°</button>
  </div>

  <div id="counters">ì•”ê¸°: 0 | ë¯¸ì•”ê¸°: 0</div>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th style="width: 40%">ì˜ì–´</th>
          <th style="width: 40%">ëœ»</th>
          <th>ìƒíƒœ</th>
        </tr>
      </thead>
      <tbody id="word-body"></tbody>
    </table>
  </div>

  <script>
    // ìš”ì²­í•˜ì‹  ì „ì²´ ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ (ì˜¤íƒ€ ìë™ ë³´ì • ì ìš©ë¨)
    const WORDS = [
      { eng: "in advance", mean: "ì‚¬ì „ì—" },
      { eng: "inspect", mean: "ê²€ì‚¬í•˜ë‹¤" },
      { eng: "ridiculous", mean: "ìš°ìŠ¤ê½ìŠ¤ëŸ¬ìš´" },
      { eng: "accomplish", mean: "ì„±ì·¨í•˜ë‹¤" },
      { eng: "estimate", mean: "ì¶”ì •í•˜ë‹¤" },
      { eng: "tune in", mean: "(ë‚¨ì˜ ê°ì •ì—) ê·€ë¥¼ ê¸°ìš¸ì´ë‹¤" },
      { eng: "set about", mean: "ì‹œì‘í•˜ë‹¤" },
      { eng: "involved", mean: "ì—´ì¤‘í•˜ëŠ”" },
      { eng: "committed", mean: "ëª°ì…ëœ" },
      { eng: "severe", mean: "ì‹¬ê°í•œ" },
      { eng: "browse", mean: "í›‘ì–´ë³´ë‹¤" },
      { eng: "regardless of", mean: "~ì— ê´€ê³„ì—†ì´" },
      { eng: "proactive", mean: "ì§„ì·¨ì ì¸" },
      { eng: "resume", mean: "ì´ë ¥ì„œ" },
      { eng: "excessive", mean: "ì§€ë‚˜ì¹œ" },
      { eng: "incentive", mean: "ë™ê¸°" },
      { eng: "engage in", mean: "ì°¸ì—¬í•˜ë‹¤" },
      { eng: "scapegoat", mean: "í¬ìƒì–‘" },
      { eng: "dirt", mean: "ì˜¤ë¬¼, ë”ëŸ¬ìš´ ê²ƒ" },
      { eng: "emphasize", mean: "ê°•ì¡°í•˜ë‹¤" },
      { eng: "lie", mean: "ë†“ì—¬ìˆë‹¤." },
      { eng: "deserve", mean: "ë°›ì„ ë§Œí•˜ë‹¤" },
      { eng: "mislead", mean: "ì†ì´ë‹¤" },
      { eng: "cut back on", mean: "~ì„ ì¤„ì´ë‹¤" },
      { eng: "reveal", mean: "ë°íˆë‹¤" },
      { eng: "carry out", mean: "~ì„ ìˆ˜í–‰í•˜ë‹¤" },
      { eng: "vital", mean: "ë§¤ìš° ì¤‘ìš”í•œ" },
      { eng: "ensure", mean: "ë³´ì¥í•˜ë‹¤" }, // ebsure ìˆ˜ì •ë¨
      { eng: "indication", mean: "í‘œì‹œ" },
      { eng: "prime", mean: "ìµœì ì˜, ìµœê³ ì˜" },
      { eng: "delightful", mean: "ì¦ê±°ìš´" },
      { eng: "trustworthy", mean: "ì‹ ë¢°í•  ë§Œí•œ" },
      { eng: "bet", mean: "í™•ì‹ í•˜ë‹¤. ë³´ì¦í•˜ë‹¤" },
      { eng: "dangerously", mean: "ìœ„í—˜í•  ì •ë„ë¡œ" },
      { eng: "wiser", mean: "ë” í˜„ëª…í•œ" },
      { eng: "fit", mean: "ì•Œë§ë‹¤, ì í•©í•˜ë‹¤" },
      { eng: "construct", mean: "êµ¬ì„±í•˜ë‹¤" },
      { eng: "gratitude", mean: "ê°ì‚¬" },
      { eng: "premise", mean: "ì „ì œ" },
      { eng: "approximately", mean: "ëŒ€ëµ" },
      { eng: "raise", mean: "ê¸°ë¥´ë‹¤." },
      { eng: "confinement", mean: "ê°‡í˜" },
      { eng: "protest", mean: "í•­ì˜í•˜ë‹¤" },
      { eng: "regulation", mean: "í†µì œ" },
      { eng: "related to", mean: "~ì— ê´€ë ¨ëœ" },
      { eng: "transformative", mean: "(ì‚¬ëŒì„) ë³€í™”ì‹œí‚¤ëŠ”" },
      { eng: "distinguish", mean: "êµ¬ë³„í•˜ë‹¤." },
      { eng: "nuanced", mean: "ë¯¸ë¬˜í•œ ì°¨ì´ê°€ ìˆëŠ”" },
      { eng: "pose", mean: "ì œê¸°í•˜ë‹¤, ì£¼ë‹¤, ë¶€ê³¼í•˜ë‹¤" },
      { eng: "commit to", mean: "~ì— ì „ë…í•˜ë‹¤." },
      { eng: "evident", mean: "ë¶„ëª…í•œ" },
      { eng: "ready-made", mean: "ì´ë¯¸ ì£¼ì–´ì§„" },
      { eng: "control", mean: "í†µì œë ¥" }, // contrl ìˆ˜ì •ë¨
      { eng: "underneath", mean: "~ì˜ ë°‘ì—" },
      { eng: "prescribe", mean: "ê·œì •í•˜ë‹¤. ì§€ì‹œí•˜ë‹¤." },
      { eng: "mobility", mean: "ìœ ë™ì„±" },
      { eng: "impose", mean: "ë¶€ì—¬í•˜ë‹¤." },
      { eng: "disagreement", mean: "ì˜ê²¬ì¶©ëŒ" },
      { eng: "navigate", mean: "ìš´ì „í•˜ë‹¤." },
      { eng: "critical", mean: "ì¤‘ìš”í•œ" },
      { eng: "likelihood", mean: "ê°€ëŠ¥ì„±" },
      { eng: "be rooted in", mean: "~ì— ë¿Œë¦¬ ë°•í˜€ ìˆë‹¤." },
      { eng: "get along with", mean: "~ì™€ ì˜ì§€ë‚´ë‹¤." },
      { eng: "relate", mean: "ë§ˆìŒì´ í†µí•˜ë‹¤" },
      { eng: "flock", mean: "ëª¨ì´ë‹¤." },
      { eng: "reduction", mean: "ì¶•ì†Œ, ê°ì†Œ" },
      { eng: "fertilizer", mean: "ë¹„ë£Œ" },
      { eng: "uptake", mean: "í¡ìˆ˜" },
      { eng: "acidic", mean: "ì‚°ì„±ì˜" },
      { eng: "earthworm", mean: "ì§€ë ì´" },
      { eng: "essential nutrient", mean: "í•„ìˆ˜ ì˜ì–‘ì†Œ" },
      { eng: "content", mean: "í•¨ë¥˜ëŸ‰, ë‚´ìš©ë¬¼" },
      { eng: "accumulation", mean: "ì¶•ì , ëˆ„ì " },
      { eng: "firm", mean: "íšŒì‚¬" },
      { eng: "dismiss", mean: "í•´ê³ í•˜ë‹¤." }, // dismise ìˆ˜ì •ë¨
      { eng: "picture", mean: "ìƒìƒí•˜ë‹¤. ê·¸ë¦¬ë‹¤." },
      { eng: "unemployment", mean: "ì‹¤ì—…" },
      { eng: "leakage", mean: "ëˆ„ì¶œ, ëˆ„ìˆ˜" },
      { eng: "earnings", mean: "ìˆ˜ì…" },
      { eng: "genuine", mean: "ì§„ì§œì˜" },
      { eng: "wrinkle", mean: "ì£¼ë¦„(ì‚´)" },
      { eng: "noticeably", mean: "ëˆˆì— ë„ê²Œ" },
      { eng: "obvious", mean: "ëª…í™•í•œ" },
      { eng: "insincere", mean: "ì§„ì‹¤í•˜ì§€ ëª»í•œ" }, // insinere ìˆ˜ì •ë¨
      { eng: "primarily", mean: "ì£¼ë¡œ" },
      { eng: "pesticide", mean: "ì‚´ì¶©ì œ" },
      { eng: "recession", mean: "ê²½ê¸° í›„í‡´" },
      { eng: "unfavorable", mean: "í˜¸ì˜ì ì´ì§€ ì•Šì€, ê±°ìŠ¬ë¦¬ëŠ”" },
      { eng: "tough", mean: "ê°•í•œ" },
      { eng: "handle", mean: "ê°ë‹¹í•˜ë‹¤." },
      { eng: "coordinate", mean: "í†µí•©í•˜ë‹¤." },
      { eng: "conservationist", mean: "í™˜ê²½ë³´í˜¸ í™œë™ê°€" },
      { eng: "authority", mean: "ë‹¹êµ­" },
      { eng: "individual", mean: "ê°œì²´, ê°œê°œì˜" },
      { eng: "supplement", mean: "ë³´ì¶©í•˜ë‹¤" },
      { eng: "remove", mean: "ì˜®ê¸°ë‹¤. ì œê±°í•˜ë‹¤" },
      { eng: "release", mean: "ë†“ì•„ì£¼ë‹¤. ë°©ì¶œí•˜ë‹¤" },
      { eng: "leftover", mean: "ë‚¨ì€ ìŒì‹" },
      { eng: "spoil", mean: "ìƒí•˜ë‹¤." },
      { eng: "generous", mean: "ê´€ëŒ€í•œ í›„í•œ." },
      { eng: "spill", mean: "ë„˜ì¹˜ë‹¤" },
      { eng: "disastrous", mean: "ì²˜ì°¸í•œ, í”¼í•´ê°€ ë§‰ì‹¬í•œ" },
      { eng: "floodplain", mean: "ë²”ëŒì›" },
      { eng: "wetland", mean: "ìŠµì§€" },
      { eng: "variation", mean: "ë³€í˜•, ë³€í™”" },
      { eng: "ever-changing", mean: "ëŠì„ì—†ì´ ëŠ˜ ë³€í™”í•˜ëŠ”" },
      { eng: "shoreline", mean: "ê°•ê°€" },
      { eng: "deliberately", mean: "ì˜ë„ì ìœ¼ë¡œ" },
      { eng: "captive breeding", mean: "í¬íšì‚¬ìœ¡" },
      { eng: "hatch", mean: "ë¶€í™”í•˜ë‹¤" },
      { eng: "reciprocal", mean: "ìƒí˜¸ ì´íƒ€ì£¼ì˜" },
      { eng: "primates", mean: "ì˜ì¥ë¥˜" },
      { eng: "capacity", mean: "ìˆ˜ìš©ëŠ¥ë ¥" },
      { eng: "imitate", mean: "ëª¨ë°©í•˜ë‹¤" },
      { eng: "interval", mean: "ê°„ê²©" },
      { eng: "in public", mean: "ê³µê³µì—°íˆ" },
      { eng: "exaggerate", mean: "ê³¼ì¥í•˜ë‹¤." },
      { eng: "underestimate", mean: "ê³¼ì†Œí‰ê°€í•˜ë‹¤." },
      { eng: "be supposed to do", mean: "~í•´ì•¼ í•œë‹¤." },
      { eng: "sort out", mean: "ê°€ë ¤ë‚´ë‹¤." },
      { eng: "negotiate", mean: "í˜‘ìƒí•˜ë‹¤." },
      { eng: "be unburdened", mean: "ë²—ì–´ë‚˜ë‹¤." }, // enburdened -> unburdened ìˆ˜ì •
      { eng: "met", mean: "ì¶©ì¡±í•˜ë‹¤." },
      { eng: "hold ~in", mean: "~ì„ ì°¸ë‹¤." },
      { eng: "distress", mean: "ê´´ë¡œì›€" },
      { eng: "eliminate", mean: "ë°°ì„¤í•˜ë‹¤, ì—†ì• ë‹¤" },
      { eng: "idiosyncratic", mean: "(ê°œì¸ì—ê²Œ) íŠ¹ìœ í•œ" },
      { eng: "scattered", mean: "ë¶„ì‚°ëœ" },
      { eng: "cloak", mean: "ë§í† " },
      { eng: "sparkle", mean: "ë°˜ì§ì„" },
      { eng: "handy", mean: "í¸ë¦¬í•œ" },
      { eng: "deep-sea", mean: "ì‹¬í•´ì˜" },
      { eng: "terms", mean: "ì¡°í•­, ì¡°ê±´" },
      { eng: "attract", mean: "ìœ í˜¹í•˜ë‹¤. ìœ ì¸í•˜ë‹¤." },
      { eng: "attractant", mean: "ìœ ì¸(ë¬¼ì§ˆ)" }, // attractont ìˆ˜ì •ë¨
      { eng: "bond", mean: "ê²°ì†, ìœ ëŒ€" },
      { eng: "conduct", mean: "ìˆ˜í–‰í•˜ë‹¤." },
      { eng: "pull together", mean: "ëª¨ìœ¼ë‹¤" },
      { eng: "assume", mean: "ê°€ì •í•˜ë‹¤" },
      { eng: "standpoint", mean: "ê²½ì§€, ê´€ì " },
      { eng: "confront", mean: "ë§ˆì£¼í•˜ë‹¤." },
      { eng: "blend", mean: "í˜¼í•©í•˜ë‹¤. ì„ë‹¤." },
      { eng: "internalize", mean: "ë‚´ë©´í™” í•˜ë‹¤." },
      { eng: "artifact", mean: "ì°½ì‘ë¬¼" },
      { eng: "framework", mean: "í‹€, ì²´ì œ" },
      { eng: "frustrating", mean: "ë¶ˆë§ŒìŠ¤ëŸ¬ìš´" },
      { eng: "make sense", mean: "ì˜ë¯¸ê°€ í†µí•˜ë‹¤. íƒ€ë‹¹í•˜ë‹¤." },
      { eng: "commitment", mean: "ì•½ì†, í—Œì‹ " },
      { eng: "astonishing", mean: "ë†€ë¼ìš´" },
      { eng: "willingness", mean: "ê¸°êº¼ì´í•˜ëŠ” ë§ˆìŒ" },
      { eng: "be attracted to", mean: "~ì— ëŒë¦¬ë‹¤." }, // attrancted ìˆ˜ì •ë¨
      { eng: "alert", mean: "ê²½ê³„í•˜ëŠ”" },
      { eng: "all the time", mean: "í•­ìƒ" },
      { eng: "stand for", mean: "~ì„ ë‚˜íƒ€ë‚´ë‹¤." },
      { eng: "spell out", mean: "~ì„ ìƒì„¸íˆ ë‹¤ ì“°ë‹¤." },
      { eng: "approve", mean: "ìŠ¹ë‚™í•˜ë‹¤" },
      { eng: "accommodate", mean: "ì¡°ì ˆí•˜ë‹¤" },
      { eng: "tidy", mean: "ì§ˆì„œ ì •ì—°í•œ" },
      { eng: "bottom line", mean: "ê²°ë¡ " },
      { eng: "lasting", mean: "ì§€ì†ì ì¸" },
      { eng: "encouraging", mean: "ê³ ë¬´ì ì¸" },
      { eng: "demonstration", mean: "ì‹¤ì¦, ì¦ê±°" },
      { eng: "practice", mean: "í–‰ë™, ê´€í–‰" },
      { eng: "except", mean: "ê·¸ëŸ¬ë‚˜" },
      { eng: "giving rate", mean: "ê¸°ë¶€ìœ¨" },
      { eng: "glow", mean: "ì˜¨ê¸°" },
      { eng: "faculty", mean: "êµì§ì›" },
      { eng: "expose", mean: "ë“œëŸ¬ë‚´ë‹¤(ë…¸ì¶œí•˜ë‹¤)" },
      { eng: "include and blend into", mean: "í†µí•©ì‹œí‚¤ë‹¤" },
      { eng: "stick", mean: "ë‹¬ë¼ë¶™ë‹¤, ë¶™ë‹¤" },
      { eng: "intensely", mean: "ë§¤ìš°" },
      { eng: "channel", mean: "ê²½ë¡œ" },
      { eng: "be past", mean: "ì‚¬ë¼ì§€ë‹¤" },
      { eng: "adequate", mean: "ì ë‹¹í•œ, ì¶©ë¶„í•œ" },
      { eng: "grain", mean: "ê³¡ì‹" },
      { eng: "vast", mean: "ë°©ëŒ€í•œ" },
      { eng: "investigate", mean: "ì—°êµ¬í•˜ë‹¤" },
      { eng: "pile", mean: "ë”ë¯¸" },
      { eng: "climate crisis", mean: "ê¸°í›„ ìœ„ê¸°" },
      { eng: "withholding", mean: "ì£¼ì§€ ì•ŠëŠ” ê²ƒ" },
      { eng: "to the point of discomfort", mean: "ë¶ˆí¸í•  ì •ë„ë¡œ" },
      { eng: "appear to", mean: "~ì²˜ëŸ¼ ë³´ì¸ë‹¤" }, // apear ìˆ˜ì •ë¨
      { eng: "absorption", mean: "í¡ìˆ˜" },
      { eng: "overlook", mean: "ê°„ê³¼í•˜ë‹¤" },
      { eng: "prevent", mean: "ë§‰ë‹¤" },
      { eng: "wheat", mean: "ë°€" },
      { eng: "Indeed", mean: "ì‹¤ì œë¡œ" },
      { eng: "entail", mean: "ìˆ˜ë°˜í•˜ë‹¤" },
      { eng: "give for Ving", mean: "Ví•˜ë ¤ í•˜ë‹¤" },
      { eng: "provide A with B", mean: "Bë¥¼ Aì—ê²Œ ì œê³µí•˜ë‹¤" },
      { eng: "S V, only to V", mean: "ê²°êµ­ Ví•˜ë‹¤" },
      { eng: "nor V S", mean: "Sê°€ Ví•˜ëŠ” ê²ƒë„ ì•„ë‹ˆë‹¤" },
      { eng: "end up Ving", mean: "ê²°êµ­ Ví•˜ë‹¤" },
      { eng: "enjoy Ving", mean: "Ví•˜ëŠ” ê±¸ ì¦ê¸°ë‹¤" },
      { eng: "spend A Ving", mean: "Aë¥¼ Ví•˜ëŠ”ë° ì“°ë‹¤" },
      { eng: "derive A from B", mean: "Aì„ Bì—ì„œ ì–»ë‹¤" },
      { eng: "refer to A as B", mean: "Aë¥¼ Bë¼ ë¶€ë¥´ë‹¤" },
      { eng: "would rather A than B", mean: "Bë³´ë‹¤ëŠ” Aë¥¼ í•œë‹¤" },
      { eng: "prefer to V", mean: "Ví•˜ëŠ” ê±¸ ì„ í˜¸í•˜ë‹¤" },
      { eng: "label A as B", mean: "Aë¥¼ Bë¡œ ì´ë¦„ ë¶™ì´ë‹¤" },
      { eng: "think of A as B", mean: "Aë¥¼ Bë¡œ ìƒê°í•˜ë‹¤" }
    ];

    let knownCount = 0;
    let unknownCount = 0;
    let reversed = false;
    let voices = [];

    // --- ìŒì„± ì¸ì‹(TTS) ë¡œì§ ---
    function loadVoices() {
      voices = window.speechSynthesis.getVoices();
    }
    
    if (window.speechSynthesis.onvoiceschanged !== undefined) {
      window.speechSynthesis.onvoiceschanged = loadVoices;
    }
    loadVoices();

    function speak(text) {
      window.speechSynthesis.cancel(); // ì¤‘ë³µ ì¬ìƒ ë°©ì§€

      // í…ìŠ¤íŠ¸ ì •ì œ: 
      // 1. ê´„í˜¸ ì•ˆ ë‚´ìš© ì‚­ì œ
      // 2. íŠ¹ìˆ˜ë¬¸ì ì¼ë¶€ ì²˜ë¦¬, ì˜ì–´/ê³µë°± ìœ ì§€
      const cleanText = text
        .replace(/\(.*\)/g, '') 
        .replace(/[^a-zA-Z\sâ€™'-]/g, '')
        .trim();

      const u = new SpeechSynthesisUtterance(cleanText);
      u.lang = 'en-US';
      u.rate = 0.9; 

      if (voices.length > 0) {
        // Google US English ë˜ëŠ” ì¼ë°˜ US English ìš°ì„  ì„ íƒ
        const preferredVoice = voices.find(v => 
          (v.name.includes('Google') && v.lang.includes('en-US')) || 
          v.lang === 'en-US' || 
          v.lang.startsWith('en')
        );
        if (preferredVoice) {
          u.voice = preferredVoice;
        }
      }

      window.speechSynthesis.speak(u);
    }
    // ----------------------------

    function escapeHtml(s) {
      return String(s).replace(/[&<>"']/g, m => (
        { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[m]
      ));
    }

    function updateCounters() {
      document.getElementById('counters').textContent = `ì•”ê¸°: ${knownCount} | ë¯¸ì•”ê¸°: ${unknownCount}`;
    }

    function setEnglishCellContent(td, text) {
      // í…ìŠ¤íŠ¸ì™€ ìŠ¤í”¼ì»¤ ë²„íŠ¼ ë°°ì¹˜
      td.innerHTML = `<span>${escapeHtml(text)}</span> <button class="speak" aria-label="ë“£ê¸°">ğŸ”Š</button>`;
      const btn = td.querySelector('.speak');
      btn.onclick = (e) => {
        e.stopPropagation();
        speak(text);
      };
    }

    function buildTable() {
      const tb = document.getElementById('word-body');
      tb.innerHTML = '';
      
      WORDS.forEach((item) => {
        const tr = document.createElement('tr');
        
        // ì˜ì–´ ì…€
        const tdEng = document.createElement('td');
        tdEng.className = 'col-eng';
        tdEng.dataset.original = item.eng;
        setEnglishCellContent(tdEng, item.eng);
        
        // ëœ» ì…€
        const tdMean = document.createElement('td');
        tdMean.className = 'col-mean';
        tdMean.dataset.meaning = item.mean;
        tdMean.textContent = item.mean;
        
        // ë²„íŠ¼ ì…€
        const tdAct = document.createElement('td');
        tdAct.className = 'col-act';
        tdAct.innerHTML = `<button class="btn-known">ì•”ê¸°</button><button class="btn-unknown">ë¯¸ì•”ê¸°</button>`;
        
        tr.append(tdEng, tdMean, tdAct);
        tb.appendChild(tr);
      });
      
      knownCount = 0; unknownCount = 0; updateCounters(); applyConceal();
    }

    function mark(btn, type) {
      const row = btn.closest('tr');
      const tb  = row.parentNode;
      
      if (type === 'known') {
        if (!row.classList.contains('known')) {
          knownCount++;
          if (row.classList.contains('unknown')) unknownCount--;
          row.classList.add('known');
          row.classList.remove('unknown');
        }
      } else if (type === 'unknown') {
        if (!row.classList.contains('unknown')) {
          unknownCount++;
          if (row.classList.contains('known')) knownCount--;
          row.classList.add('unknown');
          row.classList.remove('known');
          tb.insertBefore(row, tb.firstChild);
        }
      }
      updateCounters();
    }

    function applyConceal() {
      document.querySelectorAll('#word-body tr').forEach(r => {
        const eng = r.querySelector('.col-eng');
        const mean = r.querySelector('.col-mean');
        if(!eng || !mean) return;

        // ì´ˆê¸°í™”
        eng.classList.remove('conceal');
        mean.classList.remove('conceal');
        
        // ë‚´ìš© ë³µêµ¬ (ìŠ¤í”¼ì»¤ ë²„íŠ¼ í¬í•¨)
        if(!eng.querySelector('button')) setEnglishCellContent(eng, eng.dataset.original);
        mean.textContent = mean.dataset.meaning;

        // ê°€ë¦¬ê¸° ì ìš©
        const target = reversed ? eng : mean;
        target.textContent = 'í´ë¦­í•´ ë³´ê¸°';
        target.classList.add('conceal');
      });
    }

    function handleConcealClick(td) {
      if (!td.classList.contains('conceal')) {
        // ì´ë¯¸ ë³´ì´ëŠ” ìƒíƒœë©´ ë‹¤ì‹œ ê°€ë¦¬ê¸° (í† ê¸€)
        const row = td.closest('tr');
        const eng = row.querySelector('.col-eng');
        const mean = row.querySelector('.col-mean');
        
        const target = reversed ? eng : mean;
        if (td === target) {
          td.textContent = 'í´ë¦­í•´ ë³´ê¸°';
          td.classList.add('conceal');
        }
        return;
      }

      // ê°€ë ¤ì§„ ìƒíƒœ -> ë³´ì—¬ì£¼ê¸°
      if (td.classList.contains('col-eng')) {
        setEnglishCellContent(td, td.dataset.original);
      } else {
        td.textContent = td.dataset.meaning;
      }
      td.classList.remove('conceal');
    }

    function reverseCols() {
      reversed = !reversed;
      const ths = document.querySelectorAll('thead th');
      if (reversed) {
        ths[0].textContent = "ëœ»";
        ths[1].textContent = "ì˜ì–´";
      } else {
        ths[0].textContent = "ì˜ì–´";
        ths[1].textContent = "ëœ»";
      }
      
      document.querySelectorAll('#word-body tr').forEach(r => {
        const cells = Array.from(r.children);
        if (cells.length < 3) return;
        r.append(cells[1], cells[0], cells[2]);
      });
      applyConceal();
    }

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
    document.addEventListener('click', (e) => {
      if (e.target.matches('.btn-known')) {
        mark(e.target, 'known');
        return;
      }
      if (e.target.matches('.btn-unknown')) {
        mark(e.target, 'unknown');
        return;
      }
      const td = e.target.closest('td');
      if (td && (td.classList.contains('col-eng') || td.classList.contains('col-mean'))) {
        handleConcealClick(td);
      }
    });

    document.getElementById('btn-reverse').addEventListener('click', reverseCols);

    buildTable();
  </script>
</body>
</html>